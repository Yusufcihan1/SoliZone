{"version":3,"file":"react-headless-notifier.esm.js","sources":["../node_modules/style-inject/dist/style-inject.es.js","../src/Timer.ts","../src/index.tsx"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","// inspired by: https://gist.github.com/ncou/3a0a1f89c8e22416d0d607f621a948a9\n\nexport default class Timer {\n  constructor(private readonly callback, private readonly delay) {}\n\n  private timerId;\n  private start;\n  private remaining = this.delay;\n\n  resume() {\n    this.start = new Date().getTime();\n\n    this.clear();\n\n    this.timerId = setTimeout(this.callback, this.remaining);\n\n    return this;\n  }\n\n  pause() {\n    this.clear();\n\n    this.remaining -= new Date().getTime() - this.start;\n\n    return this;\n  }\n\n  clear() {\n    if (this.timerId) {\n      clearTimeout(this.timerId);\n    }\n\n    return this;\n  }\n}\n","import * as React from 'react';\nimport {\n  createContext,\n  useContext,\n  cloneElement,\n  useReducer,\n  useState,\n  useEffect,\n  useMemo,\n} from 'react';\nimport './index.css';\nimport Timer from './Timer';\n\nconst NotifierContext = createContext({\n  notify: (children, overrideConfig = {}) => {},\n  dismissAll: () => {},\n});\n\nconst ADD = 'add';\nconst DISMISS = 'dismiss';\nconst DISMISS_ALL = 'dismiss_all';\n\nlet id = 1;\n\nexport const positions = {\n  TOP: 'top',\n  TOP_RIGHT: 'topRight',\n  TOP_LEFT: 'topLeft',\n  BOTTOM_RIGHT: 'bottomRight',\n  BOTTOM_LEFT: 'bottomLeft',\n  BOTTOM: 'bottom',\n};\n\nconst initialState = {\n  [positions.TOP]: [],\n  [positions.TOP_RIGHT]: [],\n  [positions.TOP_LEFT]: [],\n  [positions.BOTTOM_RIGHT]: [],\n  [positions.BOTTOM_LEFT]: [],\n  [positions.BOTTOM]: [],\n};\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case ADD:\n      return {\n        ...state,\n        [action.notification.position]: [\n          ...state[action.notification.position],\n          action.notification,\n        ],\n      };\n    case DISMISS:\n      // we extract the position from the `id`\n      const [position] = action.notification.id.split('-');\n      return {\n        ...state,\n        [position]: state[position].filter(\n          ({ id }) => id !== action.notification.id,\n        ),\n      };\n    case DISMISS_ALL:\n      return { ...initialState };\n    default:\n      return state;\n  }\n}\n\nfunction useNotifications(defaultConfig) {\n  const [notifications, dispatch] = useReducer(reducer, initialState);\n\n  const notify = (children, overrideConfig = {}) => {\n    const config = { ...defaultConfig, ...overrideConfig };\n\n    const newId = id++;\n\n    dispatch({\n      type: ADD,\n      notification: {\n        // `id` is compose of the position and a unique number\n        // so a first notification created on the top position will have the `id` = \"top-1\"\n        // then the second one on the bottom right will be `bottomRight-2`\n        // this system allow us to understand in which array is the notification using only the `id`\n        // check `DISMISS` action in the reducer\n        id: `${config.position}-${newId}`,\n        children,\n        position: config.position,\n        duration: config.duration,\n      },\n    });\n  };\n\n  const dismiss = id => {\n    dispatch({ type: DISMISS, notification: { id } });\n  };\n\n  const dismissAll = () => {\n    dispatch({ type: DISMISS_ALL });\n  };\n\n  return { notifications, notify, dismiss, dismissAll };\n}\n\nconst defaultConfig = {\n  max: null,\n  duration: 5000,\n  position: positions.BOTTOM_RIGHT,\n};\n\nfunction NotifierContextProvider({ children, config: overrideConfig = {} }) {\n  const config = useMemo(() => ({ ...defaultConfig, ...overrideConfig }), [\n    overrideConfig,\n  ]);\n  const { notifications, notify, dismiss, dismissAll } = useNotifications(\n    config,\n  );\n\n  return (\n    <NotifierContext.Provider\n      value={{\n        notify,\n        dismissAll,\n      }}\n    >\n      {children}\n\n      <NotificationBag\n        className=\"react-headless-notifier-fixed react-headless-notifier-top-0 react-headless-notifier-left-0 react-headless-notifier-m-8\"\n        notifications={notifications[positions.TOP_LEFT]}\n        max={config.max}\n      >\n        {notifications => {\n          return notifications.map(({ id, children, duration }) => (\n            <NotificationWrapper\n              key={id}\n              duration={duration}\n              onDismiss={() => dismiss(id)}\n              position={positions.TOP_LEFT}\n            >\n              {children}\n            </NotificationWrapper>\n          ));\n        }}\n      </NotificationBag>\n\n      <NotificationBag\n        className=\"react-headless-notifier-fixed react-headless-notifier-top-0 react-headless-notifier-right-0 react-headless-notifier-m-8\"\n        notifications={notifications[positions.TOP_RIGHT]}\n        max={config.max}\n      >\n        {notifications => {\n          return notifications.map(({ id, children, duration }) => (\n            <NotificationWrapper\n              key={id}\n              duration={duration}\n              onDismiss={() => dismiss(id)}\n              position={positions.TOP_RIGHT}\n            >\n              {children}\n            </NotificationWrapper>\n          ));\n        }}\n      </NotificationBag>\n\n      <NotificationBag\n        className=\"react-headless-notifier-fixed react-headless-notifier-top-0 react-headless-notifier-right-0 react-headless-notifier-left-0 react-headless-notifier-flex react-headless-notifier-flex-col-reverse react-headless-notifier-items-center\"\n        notifications={notifications[positions.TOP]}\n        max={config.max}\n      >\n        {notifications => {\n          return notifications.map(({ id, children, duration }) => (\n            <NotificationWrapper\n              position={positions.TOP}\n              key={id}\n              duration={duration}\n              onDismiss={() => dismiss(id)}\n            >\n              {children}\n            </NotificationWrapper>\n          ));\n        }}\n      </NotificationBag>\n\n      <NotificationBag\n        className=\"react-headless-notifier-fixed react-headless-notifier-bottom-0 react-headless-notifier-right-0 react-headless-notifier-left-0 react-headless-notifier-flex react-headless-notifier-flex-col react-headless-notifier-items-center\"\n        notifications={notifications[positions.BOTTOM]}\n        max={config.max}\n      >\n        {notifications => {\n          return notifications.map(({ id, children, duration }) => (\n            <NotificationWrapper\n              position={positions.BOTTOM}\n              key={id}\n              duration={duration}\n              onDismiss={() => dismiss(id)}\n            >\n              {children}\n            </NotificationWrapper>\n          ));\n        }}\n      </NotificationBag>\n\n      <NotificationBag\n        className=\"react-headless-notifier-fixed react-headless-notifier-bottom-0 react-headless-notifier-left-0 react-headless-notifier-m-8\"\n        notifications={notifications[positions.BOTTOM_LEFT]}\n        max={config.max}\n      >\n        {notifications => {\n          return notifications.map(({ id, children, duration }) => (\n            <NotificationWrapper\n              key={id}\n              duration={duration}\n              onDismiss={() => dismiss(id)}\n              position={positions.BOTTOM_LEFT}\n            >\n              {children}\n            </NotificationWrapper>\n          ));\n        }}\n      </NotificationBag>\n\n      <NotificationBag\n        className=\"react-headless-notifier-fixed react-headless-notifier-bottom-0 react-headless-notifier-right-0 react-headless-notifier-m-8\"\n        notifications={notifications[positions.BOTTOM_RIGHT]}\n        max={config.max}\n      >\n        {notifications => {\n          return notifications.map(({ id, children, duration }) => (\n            <NotificationWrapper\n              key={id}\n              duration={duration}\n              onDismiss={() => dismiss(id)}\n              position={positions.BOTTOM_RIGHT}\n            >\n              {children}\n            </NotificationWrapper>\n          ));\n        }}\n      </NotificationBag>\n    </NotifierContext.Provider>\n  );\n}\n\nfunction NotificationBag({ className, notifications, max = null, children }) {\n  const displayedNotifications = useMemo(() => {\n    return max\n      ? notifications.slice(Math.max(notifications.length - max, 0))\n      : notifications;\n  }, [notifications, max]);\n\n  return <div className={className}>{children(displayedNotifications)}</div>;\n}\n\nconst animations = {\n  [positions.TOP]: {\n    enter: 'react-headless-notifier-animate-enter-top',\n    exit: 'react-headless-notifier-animate-exit-top',\n  },\n  [positions.TOP_RIGHT]: {\n    enter: 'react-headless-notifier-animate-enter-right',\n    exit: 'react-headless-notifier-animate-exit-right',\n  },\n  [positions.TOP_LEFT]: {\n    enter: 'react-headless-notifier-animate-enter-left',\n    exit: 'react-headless-notifier-animate-exit-left',\n  },\n  [positions.BOTTOM]: {\n    enter: 'react-headless-notifier-animate-enter-bottom',\n    exit: 'react-headless-notifier-animate-exit-bottom',\n  },\n  [positions.BOTTOM_RIGHT]: {\n    enter: 'react-headless-notifier-animate-enter-right',\n    exit: 'react-headless-notifier-animate-exit-right',\n  },\n  [positions.BOTTOM_LEFT]: {\n    enter: 'react-headless-notifier-animate-enter-left',\n    exit: 'react-headless-notifier-animate-exit-left',\n  },\n};\n\nfunction NotificationWrapper({\n  children,\n  duration,\n  onDismiss: handleDismiss,\n  position,\n}) {\n  const [active, setActive] = useState(true);\n  const timer = useMemo(() => new Timer(() => setActive(false), duration), [\n    duration,\n  ]);\n  const [running, setRunning] = useState(true);\n\n  useEffect(() => {\n    return () => timer.clear();\n  }, []);\n\n  useEffect(() => {\n    running ? timer.resume() : timer.pause();\n  }, [running]);\n\n  const { enter, exit } = useMemo(() => animations[position], [position]);\n\n  return (\n    <div\n      onMouseEnter={() => setRunning(false)}\n      onMouseLeave={() => setRunning(true)}\n      className={`react-headless-notifier-mb-4 react-headless-notifier-transform-gpu react-headless-notifier-transition-all ${\n        active ? enter : exit\n      }`}\n      onAnimationEnd={() => {\n        if (!active) handleDismiss();\n      }}\n    >\n      {cloneElement(children, { id, dismiss: () => setActive(false) })}\n    </div>\n  );\n}\n\nfunction useNotifier() {\n  return useContext(NotifierContext);\n}\n\nexport { NotifierContext, NotifierContextProvider, useNotifier };\n"],"names":["Timer","callback","delay","resume","start","Date","getTime","clear","timerId","setTimeout","remaining","pause","clearTimeout","NotifierContext","createContext","notify","children","overrideConfig","dismissAll","ADD","DISMISS","DISMISS_ALL","id","positions","TOP","TOP_RIGHT","TOP_LEFT","BOTTOM_RIGHT","BOTTOM_LEFT","BOTTOM","initialState","reducer","state","action","type","notification","position","split","filter","useNotifications","defaultConfig","useReducer","notifications","dispatch","config","newId","duration","dismiss","max","NotifierContextProvider","useMemo","React","Provider","value","NotificationBag","className","map","NotificationWrapper","key","onDismiss","displayedNotifications","slice","Math","length","animations","enter","exit","handleDismiss","useState","active","setActive","timer","running","setRunning","useEffect","onMouseEnter","onMouseLeave","onAnimationEnd","cloneElement","useNotifier","useContext"],"mappings":"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"}